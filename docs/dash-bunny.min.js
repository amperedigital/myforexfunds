(()=>{let t=null;function e(){function t(t,e){e||"true"===t.getAttribute("data-player-activated")||"idle"!==t.getAttribute("data-player-status")||t.setAttribute("data-player-status","ready")}function e(t,e,n,a){if("true"===e&&n&&a){var i=t.querySelector("[data-player-before]");i&&(i.style.paddingTop=a/n*100+"%")}}function n(t){return t&&t.length?t.reduce(function(t,e){return(e.width||0)>(t.width||0)?e:t},t[0]):null}document.querySelectorAll("[data-bunny-player-init]").forEach(function(a){var i=a.getAttribute("data-player-src");if(i){var r=a.querySelector("video");if(r){var o=a.querySelector(".bunny-player__placeholder");if(o){var d=o.currentSrc||o.src||"";d&&r.setAttribute("poster",d),o.removeAttribute("width"),o.removeAttribute("height"),o.style.width="100%",o.style.height="100%",o.style.objectFit="cover",o.style.maxWidth="100%",o.style.maxHeight="100%",o.style.inset="0",o.style.position="absolute",o.remove()}try{r.pause()}catch(t){}try{r.removeAttribute("src"),r.load()}catch(t){}a.hasAttribute("data-player-activated")||_(!1);var l=a.getAttribute("data-player-update-size");if("cover"===l){l=null;var u=a.querySelector(".bunny-player__before");u&&(u.style.paddingTop=""),a.style.position="absolute",a.style.inset="0",a.style.width="100%",a.style.height="100%"}var s=a.getAttribute("data-player-lazy"),c="true"===s,h="meta"===s,p="true"===a.getAttribute("data-player-autoplay"),f=function(t){if(!t)return 0;var e=String(t).trim();if(!e)return 0;var n=1;/ms$/i.test(e)?e=e.replace(/ms$/i,""):/s$/i.test(e)&&(e=e.replace(/s$/i,""),n=1e3);var a=parseFloat(e);return!isFinite(a)||a<=0?0:a*n}(a.getAttribute("data-player-autoplay-delay")),v=f<=0,y=a.getAttribute("data-player-loop"),m=null===y?p:"true"===y,g="once"===y,b=function(t){if(!t)return 1;var e=parseFloat(t);return!isFinite(e)||e<=0?1:e}(a.getAttribute("data-player-speed")),w=!1;r.muted=!!p,r.loop=!!m,g?r.loop=!1:m?r.setAttribute("loop",""):r.removeAttribute("loop"),r.setAttribute("muted",""),r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.playsInline=!0,void 0!==r.disableRemotePlayback&&(r.disableRemotePlayback=!0),p&&(r.autoplay=!1);var E=!!r.canPlayType("application/vnd.apple.mpegurl"),A=!(!window.Hls||!Hls.isSupported()||E);if("true"===l&&!h)if(c);else{var L=r.preload;r.preload="metadata";var H=function(){e(a,l,r.videoWidth,r.videoHeight),r.removeEventListener("loadedmetadata",H),r.preload=L||""};r.addEventListener("loadedmetadata",H,{once:!0}),r.src=i}var S=!1,R="";h?("true"===l&&function(t,e){return new Promise(function(a){if(e&&window.Hls&&Hls.isSupported())try{var i=new Hls,r={width:0,height:0,duration:NaN};return i.on(Hls.Events.MANIFEST_PARSED,function(t,e){var a=n(e&&e.levels||i.levels||[]);a&&a.width&&a.height&&(r.width=a.width,r.height=a.height)}),i.on(Hls.Events.LEVEL_LOADED,function(t,e){e&&e.details&&isFinite(e.details.totalduration)&&(r.duration=e.details.totalduration)}),i.on(Hls.Events.ERROR,function(){try{i.destroy()}catch(t){}a(r)}),i.on(Hls.Events.LEVEL_LOADED,function(){try{i.destroy()}catch(t){}a(r)}),void i.loadSource(t)}catch(t){return void a({width:0,height:0,duration:NaN})}function o(t){for(var e=t.split(/\r?\n/),n=0,a=0,i=null,r=null,o=0;o<e.length;o++){var d=e[o];if(0===d.indexOf("#EXT-X-STREAM-INF:"))r=d;else if(r&&d&&"#"!==d[0]){i||(i=d.trim());var l=/RESOLUTION=(\d+)x(\d+)/.exec(r);if(l){var u=parseInt(l[1],10),s=parseInt(l[2],10);u>n&&(n=u,a=s)}r=null}}return{bestW:n,bestH:a,media:i}}function d(t){for(var e,n=0,a=/#EXTINF:([\d.]+)/g;e=a.exec(t);)n+=parseFloat(e[1]);return n}fetch(t,{credentials:"omit",cache:"no-store"}).then(function(t){if(!t.ok)throw new Error("master");return t.text()}).then(function(e){var n=o(e);if(n.media){var i=function(t,e){try{return new URL(e,t).toString()}catch(t){return e}}(t,n.media);return fetch(i,{credentials:"omit",cache:"no-store"}).then(function(t){if(!t.ok)throw new Error("media");return t.text()}).then(function(t){a({width:n.bestW||0,height:n.bestH||0,duration:d(t)})})}a({width:n.bestW||0,height:n.bestH||0,duration:NaN})}).catch(function(){a({width:0,height:0,duration:NaN})})})}(i,A).then(function(n){n.width&&n.height&&e(a,l,n.width,n.height),t(a,w)}),r.preload="none"):c?r.preload="none":F(),a.addEventListener("click",function(t){var e=t.target.closest("[data-player-control]");if(e&&a.contains(e)){var n=e.getAttribute("data-player-control");"play"===n||"pause"===n||"playpause"===n?I():"mute"===n&&(r.muted=!r.muted,a.setAttribute("data-player-muted",r.muted?"true":"false"))}}),r.addEventListener("play",function(){_(!0),T("playing")}),r.addEventListener("playing",function(){w=!1,T("playing")}),r.addEventListener("pause",function(){w=!1,T("paused")}),r.addEventListener("waiting",function(){T("loading")}),r.addEventListener("canplay",function(){t(a,w)}),r.addEventListener("ended",function(){w=!1,g?(T("finished"),_(!1)):(T("paused"),_(!1))}),b&&1!==b&&(r.playbackRate=b);var x=!1;if(r.addEventListener("loadedmetadata",function(){D(),W(0,!1)}),r.addEventListener("loadeddata",function(){D(),W(0,!1)}),r.addEventListener("playing",function(){D()}),a.addEventListener("pointerenter",function(){P("active")}),a.addEventListener("pointerleave",function(){P("idle")}),p){new IntersectionObserver(function(t){t.forEach(function(t){var e=t.isIntersecting&&t.intersectionRatio>0,n=m||!r.ended||0===r.readyState;if(e){if(!v)return;!c&&!h||S||F(),("io"===R||r.paused&&"manual"!==R&&n)&&(T("loading"),r.paused&&I(e),R="")}else r.paused||r.ended||(R="io",r.pause())})},{threshold:.1}).observe(a);var N=function(){W(0,!1)},M=function(){v&&(requestAnimationFrame(N),"complete"===document.readyState?N():window.addEventListener("load",N,{once:!0}))};v?(W(0,!1),M()):setTimeout(function(){v=!0,W(0,!0),M()},f)}}}function T(t){a.getAttribute("data-player-status")!==t&&a.setAttribute("data-player-status",t)}function _(t){a.setAttribute("data-player-activated",t?"true":"false")}function F(){if(!S){if(S=!0,a._hls){try{a._hls.destroy()}catch(t){}a._hls=null}if(E)r.preload=c||h?"auto":r.preload,r.src=i,r.addEventListener("loadedmetadata",function(){t(a,w),"true"===l&&e(a,l,r.videoWidth,r.videoHeight)},{once:!0});else if(A){var o=new Hls({maxBufferLength:10});o.attachMedia(r),o.on(Hls.Events.MEDIA_ATTACHED,function(){o.loadSource(i)}),o.on(Hls.Events.MANIFEST_PARSED,function(){if(t(a,w),"true"===l){var i=n(o.levels||[]);i&&i.width&&i.height&&e(a,l,i.width,i.height)}}),a._hls=o}else r.src=i}}function I(t){r.paused||r.ended?(!c&&!h||S||F(),w=!0,R="",T("loading"),function(t,e){if(e)try{var n=document.createAttribute("playsinline");t.setAttributeNode(n)}catch(t){}var a=t.play();a&&"function"==typeof a.then&&a.catch(function(n){e&&(t.muted=!0,t.play().catch(function(){}))})}(r,t)):(R="manual",r.pause())}function W(t,e){p&&v&&(e||function(t,e){if(!t)return!1;var n=t.getBoundingClientRect(),a=window.innerWidth||document.documentElement.clientWidth||0,i=window.innerHeight||document.documentElement.clientHeight||0;if(!a||!i)return!1;var r=Math.max(0,Math.min(n.right,a)-Math.max(n.left,0)),o=Math.max(0,Math.min(n.bottom,i)-Math.max(n.top,0)),d=r*o,l=Math.max(1,n.width*n.height);return d/l>=("number"==typeof e?e:0)}(a,.05)||"visible"===document.visibilityState)&&r.paused&&!r.ended&&(T("loading"),I(!0))}function D(){if(!x&&"true"===l){var t=a.querySelector("[data-player-before]");t&&r.videoWidth&&r.videoHeight&&(t.style.paddingTop=r.videoHeight/r.videoWidth*100+"%",x=!0)}}function P(t){a.getAttribute("data-player-hover")!==t&&a.setAttribute("data-player-hover",t)}})}function n(){(window.Hls?Promise.resolve(window.Hls):t||(t=new Promise(t=>{const e=document.querySelector("script[data-hls-autoload]");if(e)return"true"===e.dataset.hlsReady?void t(window.Hls||null):(e.addEventListener("load",()=>t(window.Hls||null),{once:!0}),void e.addEventListener("error",()=>t(null),{once:!0}));const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/hls.js@1.6.11",n.async=!0,n.dataset.hlsAutoload="true",n.addEventListener("load",()=>{n.dataset.hlsReady="true",t(window.Hls||null)},{once:!0}),n.addEventListener("error",()=>t(null),{once:!0}),document.head.appendChild(n)}),t)).catch(()=>null).then(()=>e())}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n,{once:!0}):n(),window.initBunnyPlayerBasic=e})();