(()=>{let t=null;function e(){function t(t,e){e||"true"===t.getAttribute("data-player-activated")||"idle"!==t.getAttribute("data-player-status")||t.setAttribute("data-player-status","ready")}function e(t,e,n,i){if("true"===e&&n&&i){var a=t.querySelector("[data-player-before]");a&&(a.style.paddingTop=i/n*100+"%")}}function o(t){return t&&t.length?t.reduce(function(t,e){return(e.width||0)>(t.width||0)?e:t},t[0]):null}function d(t,e){if(e)try{var n=document.createAttribute("playsinline");t.setAttributeNode(n)}catch(t){}var i=t.play();i&&"function"==typeof i.then&&i.catch(function(n){e&&(t.muted=!0,t.play().catch(function(){}))})}function u(t,e){if(!t)return!1;var n=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth||0,a=window.innerHeight||document.documentElement.clientHeight||0;return!(!i||!a)&&Math.max(0,Math.min(n.right,i)-Math.max(n.left,0))*Math.max(0,Math.min(n.bottom,a)-Math.max(n.top,0))/Math.max(1,n.width*n.height)>=("number"==typeof e?e:0)}document.querySelectorAll("[data-bunny-player-init]").forEach(function(l){var s=l.getAttribute("data-player-src");if(s){var c=l.querySelector("video");if(c){var h=l.querySelector(".bunny-player__placeholder");if(h){var f=h.currentSrc||h.src||"";f&&c.setAttribute("poster",f),h.removeAttribute("width"),h.removeAttribute("height"),h.style.width="100%",h.style.height="100%",h.style.objectFit="cover",h.style.maxWidth="100%",h.style.maxHeight="100%",h.style.inset="0",h.style.position="absolute",h.remove()}try{c.pause()}catch(Q){}try{c.removeAttribute("src"),c.load()}catch(Y){}l.hasAttribute("data-player-activated")||z(!1);var p=l.getAttribute("data-player-update-size");if("cover"===p){p=null;var v=l.querySelector(".bunny-player__before");v&&(v.style.paddingTop=""),l.style.position="absolute",l.style.inset="0",l.style.width="100%",l.style.height="100%"}var y=l.getAttribute("data-player-lazy"),m="true"===y,w="meta"===y,g="true"===l.getAttribute("data-player-autoplay"),b=function(t){if(!t)return 0;var e=String(t).trim();if(!e)return 0;var n=1;/ms$/i.test(e)?e=e.replace(/ms$/i,""):/s$/i.test(e)&&(e=e.replace(/s$/i,""),n=1e3);var i=parseFloat(e);return!isFinite(i)||i<=0?0:i*n}(l.getAttribute("data-player-autoplay-delay")),E=b<=0,A=l.getAttribute("data-player-loop"),L=null===A?g:"true"===A,H="once"===A,S=function(t){if(!t)return 1;var e=parseFloat(t);return!isFinite(e)||e<=0?1:e}(l.getAttribute("data-player-speed")),x=l.getAttribute("data-player-scroll-stable"),M=null!==x&&"false"!==x,R=!1;c.muted=!!g,c.loop=!!L,H?c.loop=!1:L?c.setAttribute("loop",""):c.removeAttribute("loop"),c.setAttribute("muted",""),c.setAttribute("playsinline",""),c.setAttribute("webkit-playsinline",""),c.playsInline=!0,void 0!==c.disableRemotePlayback&&(c.disableRemotePlayback=!0),g&&(c.autoplay=!1);var N=!!c.canPlayType("application/vnd.apple.mpegurl"),T=!(!window.Hls||!Hls.isSupported()||N);if("true"===p&&!w)if(m);else{var F=c.preload;c.preload="metadata";var _=function(){e(l,p,c.videoWidth,c.videoHeight),c.removeEventListener("loadedmetadata",_),c.preload=F||""};c.addEventListener("loadedmetadata",_,{once:!0}),c.src=s}var I=!1,P="";w?("true"===p&&function(t,e){return new Promise(function(n){if(e&&window.Hls&&Hls.isSupported())try{var i=new Hls,a={width:0,height:0,duration:NaN};return i.on(Hls.Events.MANIFEST_PARSED,function(t,e){var n=o(e&&e.levels||i.levels||[]);n&&n.width&&n.height&&(a.width=n.width,a.height=n.height)}),i.on(Hls.Events.LEVEL_LOADED,function(t,e){e&&e.details&&isFinite(e.details.totalduration)&&(a.duration=e.details.totalduration)}),i.on(Hls.Events.ERROR,function(){try{i.destroy()}catch(t){}n(a)}),i.on(Hls.Events.LEVEL_LOADED,function(){try{i.destroy()}catch(t){}n(a)}),void i.loadSource(t)}catch(t){return void n({width:0,height:0,duration:NaN})}function r(t){for(var e=t.split(/\r?\n/),n=0,i=0,a=null,r=null,o=0;o<e.length;o++){var d=e[o];if(0===d.indexOf("#EXT-X-STREAM-INF:"))r=d;else if(r&&d&&"#"!==d[0]){a||(a=d.trim());var u=/RESOLUTION=(\d+)x(\d+)/.exec(r);if(u){var l=parseInt(u[1],10),s=parseInt(u[2],10);l>n&&(n=l,i=s)}r=null}}return{bestW:n,bestH:i,media:a}}function d(t){for(var e,n=0,i=/#EXTINF:([\d.]+)/g;e=i.exec(t);)n+=parseFloat(e[1]);return n}fetch(t,{credentials:"omit",cache:"no-store"}).then(function(t){if(!t.ok)throw new Error("master");return t.text()}).then(function(e){var i=r(e);if(i.media){var a=function(t,e){try{return new URL(e,t).toString()}catch(t){return e}}(t,i.media);return fetch(a,{credentials:"omit",cache:"no-store"}).then(function(t){if(!t.ok)throw new Error("media");return t.text()}).then(function(t){n({width:i.bestW||0,height:i.bestH||0,duration:d(t)})})}n({width:i.bestW||0,height:i.bestH||0,duration:NaN})}).catch(function(){n({width:0,height:0,duration:NaN})})})}(s,T).then(function(n){n.width&&n.height&&e(l,p,n.width,n.height),t(l,R)}),c.preload="none"):m?c.preload="none":U(),l.addEventListener("click",function(t){var e=t.target.closest("[data-player-control]");if(e&&l.contains(e)){var n=e.getAttribute("data-player-control");"play"===n||"pause"===n||"playpause"===n?V():"mute"===n&&(c.muted=!c.muted,l.setAttribute("data-player-muted",c.muted?"true":"false"))}}),c.addEventListener("play",function(){z(!0),X("playing")}),c.addEventListener("playing",function(){R=!1,X("playing")}),c.addEventListener("pause",function(){R=!1,X("paused")}),c.addEventListener("waiting",function(){X("loading")}),c.addEventListener("canplay",function(){t(l,R)}),c.addEventListener("ended",function(){R=!1,H?(X("finished"),z(!1)):(X("paused"),z(!1))}),S&&1!==S&&(c.playbackRate=S);var W=!1;if(c.addEventListener("loadedmetadata",function(){J(),G(0,!1)}),c.addEventListener("loadeddata",function(){J(),G(0,!1)}),c.addEventListener("playing",function(){J()}),l.addEventListener("pointerenter",function(){K("active")}),l.addEventListener("pointerleave",function(){K("idle")}),g){var q=window.matchMedia?window.matchMedia("(pointer: coarse)"):null,D=M||!!q&&q.matches,O=null;function k(t){t.forEach(function(t){var e=t.isIntersecting&&t.intersectionRatio>0,n=L||!c.ended||0===c.readyState;if(e){if(!E)return;!m&&!w||I||U(),("io"===P||c.paused&&"manual"!==P&&n)&&(X("loading"),c.paused&&V(e),P="")}else c.paused||c.ended||(P="io",c.pause())})}function B(){O||D||(O=new IntersectionObserver(k,{threshold:.1})).observe(l)}D||B(),!M&&q&&"function"==typeof q.addEventListener&&q.addEventListener("change",function(t){(D=t.matches)?O&&(O.disconnect(),O=null):B()});var C=function(){G(0,!1)},$=function(){E&&(requestAnimationFrame(C),"complete"===document.readyState?C():window.addEventListener("load",C,{once:!0}))};E?(G(0,!1),$()):setTimeout(function(){E=!0,G(0,!0),$()},b)}if(M&&function(){if("undefined"==typeof window)return!1;var t=window.matchMedia&&window.matchMedia("(max-width: 1023px)"),e="undefined"!=typeof navigator&&navigator.maxTouchPoints||0,n="ontouchstart"in window||e>0;return t&&t.matches||n}()){var j=function(t){u(l,.05)&&(c.paused&&!c.ended&&"manual"!==P?(!m&&!w||I||U(),X("loading"),d(c,!0),!1):!1)};!function(t){if("function"!=typeof t)return function(){};n.push(t),i||(i=!0,window.addEventListener("scroll",function(){a||(a=requestAnimationFrame(function(){a=null,r("scroll")}))},{passive:!0}),["touchstart","touchend","pointerdown","pointerup"].forEach(function(t){window.addEventListener(t,function(){r(t)},{passive:!0})}),document.addEventListener("visibilitychange",function(){r("visibility")}),window.addEventListener("focus",function(){r("focus")}),window.addEventListener("pageshow",function(){r("pageshow")}))}(function(t){if("visibility"===t&&"hidden"===document.visibilityState)return void(c.paused||c.ended||(P=P||"io",c.pause()));j()}),l.addEventListener("pause",function(){c.ended||"manual"===P||j()})}}}function X(t){l.getAttribute("data-player-status")!==t&&l.setAttribute("data-player-status",t)}function z(t){l.setAttribute("data-player-activated",t?"true":"false")}function U(){if(!I){if(I=!0,l._hls){try{l._hls.destroy()}catch(t){}l._hls=null}if(N)c.preload=m||w?"auto":c.preload,c.src=s,c.addEventListener("loadedmetadata",function(){t(l,R),"true"===p&&e(l,p,c.videoWidth,c.videoHeight)},{once:!0});else if(T){var n=new Hls({maxBufferLength:10});n.attachMedia(c),n.on(Hls.Events.MEDIA_ATTACHED,function(){n.loadSource(s)}),n.on(Hls.Events.MANIFEST_PARSED,function(){if(t(l,R),"true"===p){var i=o(n.levels||[]);i&&i.width&&i.height&&e(l,p,i.width,i.height)}}),l._hls=n}else c.src=s}}function V(t){c.paused||c.ended?(!m&&!w||I||U(),R=!0,P="",X("loading"),d(c,t)):(P="manual",c.pause())}function G(t,e){g&&E&&(e||u(l,.05)||"visible"===document.visibilityState)&&c.paused&&!c.ended&&(X("loading"),V(!0))}function J(){if(!W&&"true"===p){var t=l.querySelector("[data-player-before]");t&&c.videoWidth&&c.videoHeight&&(t.style.paddingTop=c.videoHeight/c.videoWidth*100+"%",W=!0)}}function K(t){l.getAttribute("data-player-hover")!==t&&l.setAttribute("data-player-hover",t)}})}var n=[],i=!1,a=null;function r(t){n.length&&n.forEach(function(e){try{e(t)}catch(t){}})}function o(){(window.Hls?Promise.resolve(window.Hls):t||(t=new Promise(t=>{const e=document.querySelector("script[data-hls-autoload]");if(e)return"true"===e.dataset.hlsReady?void t(window.Hls||null):(e.addEventListener("load",()=>t(window.Hls||null),{once:!0}),void e.addEventListener("error",()=>t(null),{once:!0}));const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/hls.js@1.6.11",n.async=!0,n.dataset.hlsAutoload="true",n.addEventListener("load",()=>{n.dataset.hlsReady="true",t(window.Hls||null)},{once:!0}),n.addEventListener("error",()=>t(null),{once:!0}),document.head.appendChild(n)}),t)).catch(()=>null).then(()=>e())}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o,{once:!0}):o(),window.initBunnyPlayerBasic=e})();