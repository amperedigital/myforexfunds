window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("[data-space-bg]");if(!e.length)return;let t=null;function a(){(window.UnicornStudio?Promise.resolve():(t||(t=new Promise((e,t)=>{const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.36/dist/unicornStudio.umd.js",a.async=!0,a.onload=()=>e(),a.onerror=t,document.head.appendChild(a)})),t)).then(()=>{window.UnicornStudio&&(window.UnicornStudio.isInitialized?"function"==typeof window.UnicornStudio.refresh&&window.UnicornStudio.refresh():(window.UnicornStudio.init(),window.UnicornStudio.isInitialized=!0))}).catch(()=>{console.warn("Unable to load Unicorn Studio embed.")})}const n=window.matchMedia("(pointer: fine)"),i=(window.matchMedia("(prefers-reduced-motion: reduce)"),"undefined"!=typeof navigator&&navigator.userAgent||""),o=/Mobi|Android|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(i)&&!/iPad|Tablet|Silk|PlayBook|Kindle/i.test(i),r=()=>window.innerWidth<1024,s=[{count:120,size:[.5,1.1],speed:.02,twinkle:.25},{count:90,size:[1,1.7],speed:.05,twinkle:.35},{count:55,size:[1.4,2.3],speed:.08,twinkle:.5}],l=.0075,c=18,d=[1.6,4.8],u=25e-5,p=[.03,.14];let m=r()?0:.2,h=r()?3:1;function f(e,t,a){if(!e.hasAttribute(t))return a;return"false"!==e.getAttribute(t)}function y(e,t,a){if(!e.hasAttribute(t))return a;const n=(e.getAttribute(t)||"").trim();if(""===n)return a;const i=Number(n);if(Number.isFinite(i))return i;const o=parseFloat(n);return Number.isFinite(o)?o:a}function b(e){return Math.min(1,Math.max(0,e))}function g(e,{cover:t=!1}={}){e&&(e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.maxWidth="100%",e.style.maxHeight="100%",t&&(e.style.objectFit="cover",e.style.background="transparent"))}const x=[{rgb:[255,255,255],weight:.35},{rgb:[200,230,255],weight:.25},{rgb:[120,210,255],weight:.15},{rgb:[140,255,220],weight:.15},{rgb:[200,255,180],weight:.1}];let w=null,M=null,v=null;e.forEach(e=>{"static"===getComputedStyle(e).position&&(e.style.position="relative");const t=f(e,"data-space-bg-stars",!0),i=f(e,"data-space-bg-nebula",!0),S=f(e,"data-space-bg-glow",!0),A=S&&i,C=S,P=(e.getAttribute("data-space-bg-stars-region")||"full").toLowerCase(),X=f(e,"data-space-bg-stars-chute",!1),Y=b(y(e,"data-space-bg-stars-safe-left",.1)),k=b(y(e,"data-space-bg-stars-safe-right",.9)),E=b(y(e,"data-space-bg-stars-safe-top",0)),$=b(y(e,"data-space-bg-stars-safe-bottom",.25)),z=b(y(e,"data-space-bg-stars-safe-fade-depth",.12)),F=b(y(e,"data-space-bg-stars-safe-spawn",1)),L=Math.max(0,y(e,"data-space-bg-stars-safe-speed",.5)),T=(e.getAttribute("data-space-bg-unicorn-clip")||"chute").toLowerCase(),q=Math.max(0,y(e,"data-space-bg-unicorn-delay",8e3)),I=b(y(e,"data-space-bg-unicorn-clip-top",0)),O=b(y(e,"data-space-bg-unicorn-clip-bottom",0)),N=b(y(e,"data-space-bg-unicorn-clip-top-mobile",I)),_=b(y(e,"data-space-bg-unicorn-clip-bottom-mobile",O>0?O:.08)),U=y(e,"data-space-bg-img-parallax",0),R=f(e,"data-space-bg-dust",!0)&&!r(),D=y(e,"data-space-bg-dust-count",c),j=Math.max(0,Math.floor(D)),B=Math.max(0,y(e,"data-space-bg-parallax-strength",1)),J=y(e,"data-space-bg-parallax-ease",1),W=!Number.isFinite(J)||J>=1?1:Math.min(.35,Math.max(.01,J)),V=e.querySelector(".u-background-slot"),G=V&&V.style.transform||"",H=document.createElement("style");H.textContent='\na[href*="unicorn.studio"]{display:none!important;opacity:0!important;pointer-events:none!important;}\n.space-unicorn-layer{position:absolute;inset:0;z-index:2;pointer-events:none;overflow:hidden;mix-blend-mode:screen;opacity:0;transition:opacity 12s ease;clip-path:var(--space-layer-unicorn-clip,none);}\n.space-unicorn-layer .space-unicorn{position:absolute;inset:0;pointer-events:none;}\n.space-unicorn-layer .space-unicorn canvas,.space-unicorn-layer .space-unicorn div{width:100%!important;height:100%!important;}\n.space-layer{position:absolute;inset:0;z-index:3;pointer-events:none;overflow:hidden;mix-blend-mode:screen;}\n.space-layer canvas{position:absolute;inset:0;width:100%;height:100%;z-index:1;}\n.space-layer .space-starfield,.space-layer .space-dustfield{mix-blend-mode:screen;}\n.space-layer::before{content:"";position:absolute;inset:0;background:radial-gradient(ellipse at top,rgba(20,30,50,.45),transparent 55%),radial-gradient(ellipse at bottom,rgba(5,10,20,.55),transparent 65%);z-index:1;pointer-events:none;opacity:var(--space-layer-overlay-opacity,0);}\n.space-layer.space-layer--no-glow::before{display:none;}\n.space-video-mask-host{position:absolute;inset:0;width:100%;height:100%;overflow:hidden;z-index:1;}\n.space-video-mask-host :is(.bunny-player,.bunny-player__video,.bunny-player__placeholder){position:absolute;inset:0;width:100%!important;height:100%!important;max-width:100%!important;max-height:100%!important;object-fit:cover;}\n[data-space-bg]{position:relative;z-index:0;}\n[data-space-bg] .u-image-wrapper{position:relative;z-index:1;isolation:isolate;}\n[data-space-bg] .u-overlay{position:absolute;inset:0;z-index:2;mix-blend-mode:multiply;opacity:.92;pointer-events:none;}\n[data-space-bg] :is(.u-container,.u-layout-wrapper,.u-layout,.u-layout-column,.space-bull,.u-text,.u-rich-text,.w-embed,.u-section-content,.u-content-wrapper){position:relative;z-index:5;}\n',document.head.appendChild(H);const K=function(e){const t=e.querySelector(".u-background-slot"),a=e.querySelector(".bgvideo");if(!a)return null;t&&a.parentElement!==t&&t.appendChild(a);let n=a.querySelector(".space-video-mask-host");if(!n){for(n=document.createElement("div"),n.className="space-video-mask-host";a.firstChild;)n.appendChild(a.firstChild);a.appendChild(n)}g(a),a.style.zIndex="1",a.style.overflow="hidden",g(n),n.style.zIndex="1";const i=n.querySelector(".bunny-player");if(i){g(i),i.style.padding="0",i.setAttribute("data-player-update-size","false");const e=i.querySelector(".bunny-player__before");e&&e.remove()}const o=n.querySelector(".bunny-player__video");if(o){g(o,{cover:!0}),o.removeAttribute("width"),o.removeAttribute("height"),o.style.opacity="0",o.style.transition="opacity 2.8s ease";const e=()=>{"true"!==o.dataset.spaceVideoRevealed&&(o.dataset.spaceVideoRevealed="true",requestAnimationFrame(()=>{o.style.opacity="1"}))};o.addEventListener("loadeddata",e),o.addEventListener("canplay",e),setTimeout(e,2e3)}const r=n.querySelector(".bunny-player__placeholder");if(r){const e=r.currentSrc||r.src;e&&o&&!o.getAttribute("poster")&&o.setAttribute("poster",e),r.remove()}return{host:n,video:o||null}}(e)||{},Q=(K.host,K.video||null);function Z(){if(Q)try{Q.dataset.spaceVideoRevealed="",Q.style.opacity="0",Q.pause(),Q.currentTime=0,Q.load();const e=Q.play();e&&"function"==typeof e.catch&&e.catch(()=>{})}catch(e){}}function ee(){if(Q)try{Q.pause()}catch(e){}}const te=document.createElement("div");te.className="space-layer",S||te.classList.add("space-layer--no-glow");const ae=document.createElement("canvas"),ne=document.createElement("canvas");ae.className="space-starfield",ne.className="space-dustfield";const ie=e.getAttribute("data-space-bg-unicorn");let oe=null,re=null,se=!1;function le(){return Boolean(ie)&&(!o||window.innerWidth>=1024)}function ce(){oe||(oe=function(){const e=document.createElement("div");e.className="space-unicorn-layer",e.style.opacity="0";const t=document.createElement("div");return t.className="space-unicorn",t.dataset.usProject=ie,e.appendChild(t),e}(),requestAnimationFrame(a),pe.appendChild(oe),Ge(Ce),He())}function de(e){re||(re=setTimeout(()=>{re=null,le()&&ce()},e))}function ue({deferOnTransition:e=!1}={}){const t=le();t?oe||(e&&!se?de(q||8e3):q>0?de(q):ce()):(oe&&(oe.remove(),oe=null,Pe&&(cancelAnimationFrame(Pe),Pe=null)),re&&(clearTimeout(re),re=null)),se=t}te.appendChild(ae),te.appendChild(ne);const pe=V||e;V?V.prepend(te):e.prepend(te);const me=X&&k>Y&&$>E,he=me?Math.max(.02,Math.min(1,F)):1,fe=me?Math.max(0,L||0):0,ye=me&&r()?.35:0,be=me?Math.max(E,Math.max(0,$-ye)):$,ge=me?Math.min(1,Math.max(E,be+z)):1,xe=me?Math.min(E,ge):0,we=()=>b(r()?N:I),Me=()=>b(r()?_:O);const ve=()=>"none"===T?"none":"full"===T?function(){const e=we(),t=Math.max(0,1-e),a=Math.min(t,Me());return e<=0&&a<=0?"none":`inset(${(100*e).toFixed(3)}% 0% ${(100*a).toFixed(3)}% 0%)`}():function(){if(!me)return"none";const e=Math.max(xe,we()),t=Math.max(1-ge,Me());return`inset(${(100*e).toFixed(3)}% ${(100*(1-k)).toFixed(3)}% ${(100*t).toFixed(3)}% ${(100*Y).toFixed(3)}%)`}(),Se=12e3,Ae=600;let Ce=0,Pe=null;ue(),He();const Xe=ae.getContext("2d"),Ye=ne.getContext("2d");let ke,Ee,$e=[],ze=[],Fe=0,Le=0,Te=0,qe=0,Ie=0,Oe=!1,Ne=!1,_e=null,Ue=0,Re=R,De=0,je=0,Be=0,Je=0;let We=!0;function Ve(){ke=ae.width=ne.width=e.clientWidth,Ee=ae.height=ne.height=e.clientHeight,w=Xe.createLinearGradient(0,.2*Ee,ke,.8*Ee),w.addColorStop(0,"rgba(255,215,180,0.06)"),w.addColorStop(.2,"rgba(250,235,210,0.1)"),w.addColorStop(.45,"rgba(205,220,255,0.14)"),w.addColorStop(.7,"rgba(150,190,255,0.1)"),w.addColorStop(1,"rgba(110,140,200,0.07)"),M=Xe.createLinearGradient(.2*-ke,.1*Ee,1.1*ke,.9*Ee),M.addColorStop(0,"rgba(255,120,210,0.05)"),M.addColorStop(.4,"rgba(60,20,60,0)"),M.addColorStop(.8,"rgba(180,100,255,0.06)"),M.addColorStop(1,"rgba(40,15,60,0)"),at()}function Ge(e){if(Ce=e,!oe)return;const t=Math.max(0,Math.min(1,e)).toFixed(3);oe.style.setProperty("--space-layer-unicorn-opacity",t),oe.style.opacity=t}function He(){const e=A;if(te.style.setProperty("--space-layer-overlay-opacity",e?"1":"0"),te.style.setProperty("--space-layer-overlay-clip","none"),oe){const e=.22,t=ve();oe.style.setProperty("--space-layer-unicorn-clip",t);!function(e,t){if(!oe)return void(Ce=e);Pe&&(cancelAnimationFrame(Pe),Pe=null);const a=Ce,n=e-a;if(Math.abs(n)<.001||t<=0)return void Ge(e);const i=performance.now(),o=()=>{const e=performance.now(),r=Math.min(1,(e-i)/t),s=(l=r)*l*(3-2*l);var l;Ge(a+n*s),Pe=r<1?requestAnimationFrame(o):null};Pe=requestAnimationFrame(o)}(e,e>Ce?Se:Ae)}}function Ke(e,t){return Math.random()*(t-e)+e}function Qe(e){const t=function(){const e=x.reduce((e,t)=>e+t.weight,0);let t=Math.random()*e;for(const e of x)if((t-=e.weight)<=0)return e.rgb;return x[0].rgb}();return{x:0,y:0,r:Ke(e.size[0],e.size[1]),speed:e.speed,twinkle:e.twinkle,twinkleAmp:Ke(.3,.8),twinkleOffset:Math.random()*Math.PI*2,pulseSpeed:Ke(.08,.35),pulseOffset:Math.random()*Math.PI*2,pulseAmount:Ke(.05,.35),baseAlpha:Ke(.4,.9),layer:e,color:t,isChute:!1}}function Ze(){if(Fe=ke,$e=[],t){const e=function(){switch(P){case"top-left":return{minX:0,maxX:.5*ke,minY:0,maxY:.5*Ee};case"top-right":return{minX:.5*ke,maxX:ke,minY:0,maxY:.5*Ee};case"bottom-left":return{minX:0,maxX:.5*ke,minY:.5*Ee,maxY:Ee};case"bottom-right":return{minX:.5*ke,maxX:ke,minY:.5*Ee,maxY:Ee};case"center":return{minX:.25*ke,maxX:.75*ke,minY:.25*Ee,maxY:.75*Ee};default:return{minX:0,maxX:ke,minY:0,maxY:Ee}}}(),t=r()?.5:1;s.forEach(a=>{const n=Math.max(1,Math.round(a.count*t));for(let t=0;t<n;t++){const t=Qe(a);me?(t.isChute=!0,t.x=Math.random(),t.y=Math.random()*he):(t.x=Ke(e.minX,e.maxX),t.y=Ke(e.minY,e.maxY)),$e.push(t)}})}if(ze=[],R)for(let e=0;e<j;e++){const e=Ke(35e-5,8e-4),t=Ke(25e-5,65e-5);ze.push({x:Math.random()*ke,y:Math.random()*Ee,r:Ke(d[0],d[1]),alpha:Ke(p[0],p[1]),baseAlpha:Ke(p[0],p[1]),alphaPulseAmp:Ke(.25,.55),alphaPulseSpeed:Ke(.02,.08),alphaPulseOffset:Math.random()*Math.PI*2,driftX:Ke(-e,e),driftY:Ke(-t,t),maxDriftX:e,maxDriftY:t,driftJitter:Ke(1e-5,5e-5),swayAmp:Ke(.04,.18),swaySpeed:Ke(.004,.016),swayPhaseX:Math.random()*Math.PI*2,swayPhaseY:Math.random()*Math.PI*2,hueShift:Ke(-10,25)})}}let et=!1;function tt(){const e=U>0&&!r()&&n.matches;e!==et&&(et=e,et?(We=!1,setTimeout(()=>{We=!0,Be=De,Je=je,at()},8e3)):(We=!0,De=0,je=0,Be=0,Je=0,at()))}function at(){if(!et||!We)return;const t=Be*U*20,a=Je*U*12,n=50+t,i=50+a;if(e.style.backgroundPosition=`${n}% ${i}%`,V){const e=`translate(${t}px, ${a}px)`;V.style.transform=G?`${G} ${e}`:e}}function nt(t){const a=e.getBoundingClientRect(),n=(t.clientX-a.left)/ke-.5,i=(t.clientY-a.top)/Ee-.5;Ne||(qe=n*B,Ie=i*B,De=n,je=i,Oe||(Oe=!0),at())}function it(){qe=0,Ie=0,De=0,je=0,at(),function(){Ne=!0,Oe=!1,_e&&(clearTimeout(_e),_e=null);_e=setTimeout(()=>{Ne=!1,_e=null},ot)}()}tt();const ot=5e3;let rt=!1;Ve(),Ze(),requestAnimationFrame(function e(t){et&&(Be+=.075*(De-Be),Je+=.075*(je-Je)),1===W?(Le=qe,Te=Ie):(Le+=(qe-Le)*W,Te+=(Ie-Te)*W),function(e){Xe.clearRect(0,0,ke,Ee),C&&w&&(Xe.fillStyle=w,Xe.fillRect(0,0,ke,Ee)),A&&M&&(Xe.save(),Xe.globalCompositeOperation="lighter",Xe.fillStyle=M,Xe.fillRect(0,0,ke,Ee),Xe.restore());const t=.001*(e||0),a=Y*ke,n=k*ke,i=be*Ee,o=Math.max(1,z*Ee),r=Math.max(1,n-a),s=Math.max(1,i+o);for(const e of $e){let l,c;if(me&&e.isChute){const t=a+e.x*r,d=Math.min(s,e.y*s),u=Le*r*.1*fe,p=Te*s*.06*fe;l=Math.max(a,Math.min(n,t+u)),c=Math.max(0,Math.min(i+o,d+p))}else{const t=1+e.layer.speed*m*40;l=(e.x+Le*t*20+ke)%ke,c=(e.y+Te*t*12+Ee)%Ee}const d=Math.sin(t*e.twinkle+e.twinkleOffset),u=e.baseAlpha+d*e.twinkleAmp;let p=Math.max(.06,Math.min(1,u));if(me&&e.isChute&&c>=i){const e=(c-i)/o,t=Math.max(0,1-Math.min(1,e));if(t<=.01)continue;p*=t}const h=1+Math.sin(t*e.pulseSpeed+e.pulseOffset)*e.pulseAmount,f=Math.max(.2,e.r*h),[y,b,g]=e.color;Xe.beginPath(),Xe.fillStyle=`rgba(${y},${b},${g},${p})`,Xe.arc(l,c,f,0,2*Math.PI),Xe.fill()}}(t),function(e){const t=e||performance.now();if(!Re)return void(Ue=t);const a=Ue?t-Ue:16.67;Ue=t;const n=Math.min(2.5,a/16.67),i=(u||l)/l,o=Math.max(0,n*i)*(r()?h:1),s=.001*t;Ye.clearRect(0,0,ke,Ee);for(const e of ze){e.driftX*=.96,e.driftY*=.96,e.driftX+=Ke(-e.driftJitter,e.driftJitter),e.driftY+=Ke(-e.driftJitter,e.driftJitter),e.driftX=Math.max(-e.maxDriftX,Math.min(e.maxDriftX,e.driftX)),e.driftY=Math.max(-e.maxDriftY,Math.min(e.maxDriftY,e.driftY));const t=Math.cos(s*e.swaySpeed+e.swayPhaseX)*e.swayAmp,a=Math.sin(s*e.swaySpeed+e.swayPhaseY)*e.swayAmp;e.x+=(e.driftX+t)*o+4*Le*(.6+.2*e.r)*o,e.y+=(e.driftY+a)*o+3.5*Te*(.6+.2*e.r)*o,e.x<-20&&(e.x=ke+20),e.x>ke+20&&(e.x=-20),e.y<-20&&(e.y=Ee+20),e.y>Ee+20&&(e.y=-20);const n=1+Math.sin(s*e.alphaPulseSpeed+e.alphaPulseOffset)*e.alphaPulseAmp,i=Math.max(0,Math.min(1,e.baseAlpha*n)),r=Math.max(.6,e.r*(.8+.25*n)),l=220+e.hueShift;Ye.save(),Ye.shadowBlur=6*r,Ye.shadowColor=`rgba(${l},${l},255,${i})`,Ye.beginPath(),Ye.fillStyle=`rgba(${l},${l},255,${.9*i})`,Ye.arc(e.x+8*Le,e.y+6*Te,r,0,2*Math.PI),Ye.fill(),Ye.restore()}}(t),function(){if(!v&&Math.random()<.002){const e=Math.random()*ke*.6+.2*ke,t=Math.random()*Ee*.6+.2*Ee,a=Math.random()*Math.PI*2,n=Ke(80,140),i=Ke(600,1200),o=Ke(.3,.7);v={x:e,y:t,dx:Math.cos(a)*o,dy:Math.sin(a)*o,len:n,endTime:performance.now()+i,alpha:.5+.4*Math.random()}}}(),function(e){if(!v)return;const t=v.endTime-e;t<=0?v=null:(v.x+=16*v.dx,v.y+=16*v.dy,Xe.save(),Xe.globalAlpha=v.alpha*Math.max(0,t/1200),Xe.strokeStyle="rgba(180,220,255,0.9)",Xe.lineWidth=2,Xe.beginPath(),Xe.moveTo(v.x,v.y),Xe.lineTo(v.x-v.dx*v.len,v.y-v.dy*v.len),Xe.stroke(),Xe.restore())}(t||0),requestAnimationFrame(e)});let st=null;function lt(){!r()&&n.matches?rt||(e.addEventListener("mousemove",nt),e.addEventListener("mouseleave",it),rt=!0):rt&&(e.removeEventListener("mousemove",nt),e.removeEventListener("mouseleave",it),rt=!1,Oe=!1,qe=0,Ie=0)}if(window.addEventListener("resize",()=>{st&&clearTimeout(st),st=setTimeout(()=>{const e=Fe>0?Fe:ke;m=r()?0:.2,h=r()?3:1,tt(),lt(),ue({deferOnTransition:!0}),Ve(),Math.abs(ke-e)>=1&&Ze(),Z()},200)}),lt(),n.addEventListener("change",()=>{lt(),ue({deferOnTransition:!0})}),Q){const e=()=>{document.hidden?ee():Z()};document.addEventListener("visibilitychange",e),window.addEventListener("pageshow",e=>{e.persisted&&Z()}),window.addEventListener("pagehide",ee)}})});